function ensureOverlay(){let e=document.querySelector(".magnify-overlay");if(e)return e;e=document.createElement("div"),e.className="magnify-overlay",e.setAttribute("role","dialog"),e.setAttribute("aria-hidden","true");const t=document.createElement("img");return e.appendChild(t),e.addEventListener("click",()=>{e.classList.remove("active"),e.setAttribute("aria-hidden","true"),setTimeout(()=>{e.querySelector("img").src=""},300)}),document.body.appendChild(e),e}document.addEventListener("click",e=>{const t=e.target.closest(".magnifiable");if(!t)return;const r=ensureOverlay();r.querySelector("img").src=t.src,r.setAttribute("aria-hidden","false"),r.classList.add("active")}),document.addEventListener("keydown",e=>{const t=document.querySelector(".magnify-overlay");"Escape"===e.key&&t?.classList.contains("active")&&(t.classList.remove("active"),t.setAttribute("aria-hidden","true"),setTimeout(()=>{t.querySelector("img").src=""},300))});