let isFetching=!1;async function ensurePanelLoaded(){const e=document.getElementById("placeholder-panel-donate");if(e&&!isFetching){isFetching=!0;try{const t=await fetch("html/components/panel-donate.html");if(!t.ok)throw new Error(t.status);const n=await t.text(),a=document.createElement("div");a.innerHTML=n,e.replaceWith(...a.childNodes)}catch(e){console.error("Drop failed:",e)}finally{isFetching=!1}}}async function toggleDonatePanel(e){e?.preventDefault(),await ensurePanelLoaded();const t=document.getElementById("donateOverlay");if(!t)return;const n="flex"===t.style.display;t.style.display=n?"none":"flex",n?history.state?.panelOpen&&history.replaceState({},"",window.location.pathname):history.pushState({panelOpen:!0},"","#donate-panel-open")}document.addEventListener("keydown",e=>{"Escape"===e.key&&"flex"===document.getElementById("donateOverlay")?.style.display&&toggleDonatePanel(e)}),window.addEventListener("popstate",()=>{const e=document.getElementById("donateOverlay");e&&(e.style.display="none")});let soundCoins=null;document.addEventListener("mouseover",e=>{e.target.closest(".button-donate")&&ensurePanelLoaded()},{passive:!0}),document.addEventListener("click",e=>{const t=e.target.closest(".button-donate"),n="donateOverlay"===e.target.id;(t||n)&&toggleDonatePanel(e)});